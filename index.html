<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>iu :))</title>

<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    background:#000;
}
canvas{
    position:absolute;
    width:100%;
    height:100%;
}
</style>
</head>

<body>
<canvas id="pinkboard"></canvas>

<script>
const canvas=document.getElementById("pinkboard");
const ctx=canvas.getContext("2d");

function resize(){
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
}
window.onresize=resize;
resize();

let particles=[];

function createHeartParticle(x,y,angle,speed){
    particles.push({
        x,y,
        vx:Math.cos(angle)*speed,
        vy:Math.sin(angle)*speed,
        life:1
    });
}

function firework(x,y){
    for(let i=0;i<200;i++){
        let a=Math.random()*Math.PI*2;
        let s=Math.random()*200+50;
        createHeartParticle(x,y,a,s);
    }
}

function drawHeart(x,y,size){
    ctx.beginPath();
    ctx.moveTo(x,y);
    ctx.arc(x-size,y-size,size,0,Math.PI,true);
    ctx.arc(x+size,y-size,size,0,Math.PI,true);
    ctx.lineTo(x,y+size*2);
    ctx.fill();
}

function update(dt){
    for(let i=particles.length-1;i>=0;i--){
        let p=particles[i];

        p.vy+=80*dt; // gravity
        p.x+=p.vx*dt;
        p.y+=p.vy*dt;
        p.life-=dt*0.6;

        if(p.life<=0) particles.splice(i,1);
    }
}

function draw(){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="#ff4a88";

    particles.forEach(p=>{
        ctx.globalAlpha=p.life;
        drawHeart(p.x,p.y,4);
    });

    ctx.globalAlpha=1;
}

let last=0;
function loop(t){
    let dt=(t-last)/1000;
    last=t;

    if(Math.random()<0.04){
        firework(
            Math.random()*canvas.width,
            Math.random()*canvas.height*0.6
        );
    }

    update(dt);
    draw();
    requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

// click bắn pháo hoa
canvas.onclick=e=>firework(e.clientX,e.clientY);
</script>
</body>
</html>
